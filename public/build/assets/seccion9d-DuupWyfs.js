let l=parseInt(localStorage.getItem("vista_indice"));if(localStorage.getItem("indicesViews")){let e=localStorage.getItem("indicesViews"),n=JSON.parse(e),o=n[22];console.log(o.id),console.log(o.vista_guardada);let t=n.find(c=>c.id===l),a=o.id,r=o.vista_guardada===1;a!=l&&r&&d(t.variable_ruta),a!=l&&!r&&d(t.variable_ruta)}else alert("No se ha creado ningun curso, se te redirecionara al panel de control!!"),window.location.href=route("home");function d(e){window.location.href=route(e)}let f=localStorage.getItem("dataObjetivos"),s,_=4,u=JSON.parse(f);u?u.forEach(function(e){s=e.cursos_id,console.log(s)}):console.log("El array no existe en el Local Storage");let h=s,p=route("seccion9d-getDescripcionCurso",{CursoId:h});fetch(p).then(e=>e.json()).then(e=>{console.log(e);let n=document.getElementById("divDescripcionCurso");e.data.map(o=>{let t=document.createElement("div");t.className="row";let a=document.createElement("label");a.textContent="Descripcion: "+o.descripcion_curso,a.style.fontWeight="bold",t.appendChild(a),n.appendChild(t)})});document.getElementById("myForm").addEventListener("submit",e=>{e.preventDefault();const n=route("seccion9d-store"),o=new FormData(e.target),t=Object.fromEntries(o.entries());t.seccion_encuadre=_,t.cursos_id=s,console.log(t);const a={method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(t)};fetch(n,a).then(i=>i.json()).then(i=>{console.log(i)});let r=localStorage.getItem("indicesViews"),c=JSON.parse(r);c[22].vista_guardada=1,console.log(c),localStorage.setItem("indicesViews",JSON.stringify(c)),l++,localStorage.setItem("vista_indice",JSON.stringify(l));let g=localStorage.getItem("curso_id"),m=c[22].nombre_vista_actual,v=route("actualizar-seguimiento",{nombreVista:m,CursoId:g});fetch(v).then(i=>i.json()).then(i=>{console.log(i)}),window.location.href=route("seccion9e-create")});
