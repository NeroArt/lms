let n=parseInt(localStorage.getItem("vista_indice"));if(localStorage.getItem("indicesViews")){let o=localStorage.getItem("indicesViews"),c=JSON.parse(o),a=c[12];console.log(a.id),console.log(a.vista_guardada);let t=c.find(i=>i.id===n),r=a.id,s=a.vista_guardada===1;r!=n&&s&&d(t.variable_ruta),r!=n&&!s&&d(t.variable_ruta)}else alert("No se ha creado ningun curso, se te redirecionara al panel de control!!"),window.location.href=route("home");function d(o){window.location.href=route(o)}let v=localStorage.getItem("curso_id");document.getElementById("myForm").addEventListener("submit",o=>{o.preventDefault();const c=route("seccion7d-store"),a=new FormData(o.target),t=Object.fromEntries(a.entries());t.seccion_encuadre=4,t.cursos_id=v,t.actividades=[];for(let e=0;e<3;e++){const l={};l.actividad=document.getElementById(`actividad[${e}]`).value,t.actividades.push(l)}console.log(t);const r={method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(t)};fetch(c,r).then(e=>e.json()).then(e=>{console.log(e)});let s=localStorage.getItem("indicesViews"),i=JSON.parse(s);i[12].vista_guardada=1,console.log(i),localStorage.setItem("indicesViews",JSON.stringify(i)),n++,localStorage.setItem("vista_indice",JSON.stringify(n));let u=localStorage.getItem("curso_id"),g=i[12].nombre_vista_actual,m=route("actualizar-seguimiento",{nombreVista:g,CursoId:u});fetch(m).then(e=>e.json()).then(e=>{console.log(e)}),window.location.href=route("seccion8a-create")});
