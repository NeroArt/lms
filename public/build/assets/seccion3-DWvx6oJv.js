let s=parseInt(localStorage.getItem("vista_indice"));if(localStorage.getItem("indicesViews")){let a=localStorage.getItem("indicesViews"),c=JSON.parse(a),i=c[2];console.log(i.id),console.log(i.vista_guardada);let o=c.find(n=>n.id===s),r=i.id,l=i.vista_guardada===1;r!=s&&l&&u(o.variable_ruta),r!=s&&!l&&u(o.variable_ruta)}else alert("No se ha creado ningun curso, se te redirecionara al panel de control!!"),window.location.href=route("home");let d=localStorage.getItem("curso_id");document.getElementById("myForm").addEventListener("submit",a=>{a.preventDefault();const c=route("seccion3-store"),i=new FormData(a.target),o=Object.fromEntries(i.entries());o.guests=[];for(let e=0;e<3;e++){const t={};t.tipo_objetivo=document.getElementById(`tipo_objetivo[${e}]`).value,t.descripcion=document.getElementById(`descripcion[${e}]`).value,t.sujeto=document.getElementById(`sujeto[${e}]`).value,t.accion=document.getElementById(`accion[${e}]`).value,t.condicion=document.getElementById(`condicion[${e}]`).value,t.cursos_id=parseInt(d),o.guests.push(t)}o.cursos_id=parseInt(d),console.log(o);const r={method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(o)};fetch(c,r).then(e=>e.json()).then(e=>{const t=route("seccion3b-create");console.log(e);let f=e.dataObjetivos,S=!1;localStorage.setItem("dataObjetivos",JSON.stringify(f)),localStorage.setItem("bandera",JSON.stringify(S)),window.location.href=t});let l=localStorage.getItem("indicesViews"),n=JSON.parse(l);n[2].vista_guardada=1,console.log(n),localStorage.setItem("indicesViews",JSON.stringify(n)),s++,localStorage.setItem("vista_indice",JSON.stringify(s));let g=localStorage.getItem("curso_id"),m=n[2].nombre_vista_actual,v=route("actualizar-seguimiento",{nombreVista:m,CursoId:g});fetch(v).then(e=>e.json()).then(e=>{console.log(e)})});function u(a){window.location.href=route(a)}
