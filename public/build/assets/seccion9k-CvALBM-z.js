let c=parseInt(localStorage.getItem("vista_indice"));if(localStorage.getItem("indicesViews")){let e=localStorage.getItem("indicesViews"),r=JSON.parse(e),a=r[29];console.log(a.id),console.log(a.vista_guardada);let t=r.find(i=>i.id===c),l=a.id,n=a.vista_guardada===1;l!=c&&n&&d(t.variable_ruta),l!=c&&!n&&d(t.variable_ruta)}else alert("No se ha creado ningun curso, se te redirecionara al panel de control!!"),window.location.href=route("home");function d(e){window.location.href=route(e)}let S=localStorage.getItem("dataObjetivos"),s,_=11,g=JSON.parse(S);g?g.forEach(function(e){s=e.cursos_id,console.log(s)}):console.log("El array no existe en el Local Storage");document.getElementById("myForm").addEventListener("submit",e=>{e.preventDefault();const r=route("seccion9k-store"),a=new FormData(e.target),t=Object.fromEntries(a.entries());t.seccion_encuadre=_,t.cursos_id=s,console.log(t);const l={method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(t)};fetch(r,l).then(o=>o.json()).then(o=>{console.log(o)});let n=localStorage.getItem("indicesViews"),i=JSON.parse(n);i[29].vista_guardada=1,console.log(i),localStorage.setItem("indicesViews",JSON.stringify(i)),c++,localStorage.setItem("vista_indice",JSON.stringify(c));let u=localStorage.getItem("curso_id"),m=i[29].nombre_vista_actual,f=route("actualizar-seguimiento",{nombreVista:m,CursoId:u});fetch(f).then(o=>o.json()).then(o=>{console.log(o)}),localStorage.clear(),alert("¡¡Felicidades, has completado la certificación!!"),window.location.href=route("home")});
